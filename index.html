<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hovani - ØµÙ†Ø¯ÙˆÙ‚ Ø£Ø¯ÙˆØ§ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/diff_match_patch/20121119/diff_match_patch.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        :root {
            --bg-color: #101010; --card-bg: #1a1a1a; --text-color: #e0e0e0; --primary-color: #8A2BE2; --primary-hover: #9932CC; --shadow-color: rgba(138, 43, 226, 0.2); --logo-color: var(--primary-color); --input-bg: rgba(255, 255, 255, 0.05);
        }
        .theme-light {
            --bg-color: #f8f9fa; --card-bg: #ffffff; --text-color: #333333; --primary-color: #00BFFF; --primary-hover: #1E90FF; --shadow-color: rgba(0, 191, 255, 0.2); --logo-color: var(--primary-color); --input-bg: rgba(0, 0, 0, 0.05);
        }
        .theme-sea {
            --bg-color: linear-gradient(to bottom, #87CEEB, #4682B4); --card-bg: rgba(255, 255, 255, 0.2); --text-color: #000033; --primary-color: #ffffff; --primary-hover: #f0f8ff; --shadow-color: rgba(0, 0, 51, 0.3); --logo-color: #ffffff; --input-bg: rgba(0, 0, 0, 0.1);
        }
        .theme-summer {
            --bg-color: #FFFBEA; --card-bg: #ffffff; --text-color: #5D4037; --primary-color: #FF8C00; --primary-hover: #FFA500; --shadow-color: rgba(255, 140, 0, 0.2); --logo-color: var(--primary-color); --input-bg: rgba(0, 0, 0, 0.05);
        }
        body { background: var(--bg-color); color: var(--text-color); transition: background 0.5s ease, color 0.5s ease; overflow-x: hidden; }
        .tool-control, .drawing-tool { background-color: var(--input-bg); border: 1px solid transparent; transition: all 0.2s ease; }
        .drawing-tool.active { background-color: var(--primary-color); color: white; border-color: var(--primary-hover); }
        .drawing-tool.active svg { color: white !important; }
        input, select, textarea { background-color: var(--input-bg) !important; color: var(--text-color) !important; border: 1px solid var(--shadow-color) !important; border-radius: 0.5rem; }
        button { background-color: var(--primary-color); border-radius: 0.5rem; transition: background-color 0.2s ease; }
        button:hover { background-color: var(--primary-hover); }
        .tool-card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .tool-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 0 30px var(--shadow-color); }
        .todo-item.completed span { text-decoration: line-through; opacity: 0.5; }
        .calc-btn { background-color: var(--card-bg); color: var(--text-color); padding: 1rem; border-radius: 0.75rem; font-size: 1.25rem; }
        .op-btn { color: var(--primary-color); }
        .eq-btn { background-color: var(--primary-color) !important; color: #fff !important; }
        #logo-container { width: 32px; height: 32px; position: relative; }
        .logo-part { position: absolute; width: 12px; height: 100%; background-color: var(--logo-color); transition: background-color 0.5s ease; }
        .logo-part.left { left: 0; }
        .logo-part.right { right: 0; }
        #logo-container::before { content: ''; position: absolute; left: 50%; top: 50%; width: 16px; height: 3px; background: var(--logo-color); transform: translate(-50%, -50%) rotate(-30deg); transition: background-color 0.5s ease; }
        .page { position: absolute; width: 100%; top: 80px; left: 0; padding: 1rem 2rem; transition: opacity 0.4s ease-out, transform 0.4s ease-out; visibility: hidden; opacity: 0; }
        .page.active { transform: translateX(0); visibility: visible; opacity: 1; }
        .page.inactive-left { transform: translateX(-20px); }
        .page.inactive-right { transform: translateX(20px); }
        .tab-link.active-tab { color: var(--primary-color) !important; border-bottom: 2px solid var(--primary-color); }
    </style>
</head>
<body class="antialiased theme-neon">

    <header class="p-4 flex justify-between items-center fixed top-0 left-0 right-0 z-50 backdrop-blur-sm" style="background-color: rgba(0,0,0,0.2);">
        <div class="flex items-center gap-4">
            <div id="theme-switcher" class="relative">
                <button id="theme-menu-button" class="p-2 rounded-full focus:outline-none focus:ring-2" style="border-width: 1px; border-color: var(--logo-color); color: var(--logo-color);"><svg class="w-6 h-6 pointer-events-none" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg></button>
                <div id="theme-menu" class="hidden absolute top-full mt-2 w-48 rounded-lg shadow-lg py-1" style="background-color: var(--card-bg);">
                    <a href="#" data-theme="theme-neon" class="theme-option block px-4 py-2 text-sm">ğŸ”® Ù„ÙŠØ§Ù„ÙŠ Ø§Ù„Ù†ÙŠÙˆÙ†</a>
                    <a href="#" data-theme="theme-light" class="theme-option block px-4 py-2 text-sm">â˜€ï¸ Ø£Ø¨ÙŠØ¶ Ù†Ù‚ÙŠ</a>
                    <a href="#" data-theme="theme-sea" class="theme-option block px-4 py-2 text-sm">ğŸŒŠ Ù†Ø³ÙŠÙ… Ø§Ù„Ø¨Ø­Ø±</a>
                    <a href="#" data-theme="theme-summer" class="theme-option block px-4 py-2 text-sm">ğŸŒ… ØºØ±ÙˆØ¨ Ø§Ù„Ø´Ù…Ø³</a>
                </div>
            </div>
            <a href="#" id="home-link"><div id="logo-container"><div class="logo-part left"></div><div class="logo-part right"></div></div></a>
        </div>
        <h1 class="text-3xl font-bold tracking-wider">hovani</h1>
    </header>

    <main class="relative pt-16">
        <div id="home-page" class="page active">
            <div id="tabs-container" class="mb-8 border-b" style="border-color: var(--primary-color);">
                <nav class="flex -mb-px" aria-label="Tabs">
                    <a href="#" data-tab="ai-tools" class="tab-link active-tab text-center py-4 px-1 text-lg font-bold w-1/3">Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</a>
                    <a href="#" data-tab="general-tools" class="tab-link text-center py-4 px-1 text-lg font-medium w-1/3">Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</a>
                    <a href="#" data-tab="drawing-board" class="tab-link text-center py-4 px-1 text-lg font-medium w-1/3">Ø£Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø±Ø³Ù…</a>
                </nav>
            </div>
            <div id="tabs-content">
                <div id="ai-tools-grid" class="tab-content grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
                <div id="general-tools-grid" class="tab-content hidden grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
            </div>
        </div>
        <div id="tool-page" class="page inactive-right">
            <div class="flex items-center mb-6">
                <a href="#" id="back-to-home" class="flex items-center gap-2 p-2 rounded-lg hover:bg-[var(--input-bg)] transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                    <span>Ø§Ù„Ø¹ÙˆØ¯Ø©</span>
                </a>
                <h2 id="tool-page-title" class="text-3xl font-bold mr-4" style="color: var(--primary-color);"></h2>
            </div>
            <div id="tool-page-body" class="p-4 rounded-lg" style="background-color: var(--card-bg);"></div>
        </div>
    </main>
    
    <script>
    // --- APP LOGIC ---
    const HovaniApp = {
        elements: {},
        state: { fabricCanvas: null, currentDrawingTool: 'brush', isDrawingShape: false, shapeStartX: 0, shapeStartY: 0, currentShape: null, undoHistory: [], redoHistory: [], clockInterval: null, stopwatchInterval: null, timerInterval: null, },
        init() { this.cacheElements(); this.bindEvents(); this.router(); },
        cacheElements() {
            this.elements = { body: document.body, themeMenuButton: document.getElementById('theme-menu-button'), themeMenu: document.getElementById('theme-menu'), tabsContainer: document.getElementById('tabs-container'), aiToolsGrid: document.getElementById('ai-tools-grid'), generalToolsGrid: document.getElementById('general-tools-grid'), homePage: document.getElementById('home-page'), toolPage: document.getElementById('tool-page'), toolPageTitle: document.getElementById('tool-page-title'), toolPageBody: document.getElementById('tool-page-body'), homeLink: document.getElementById('home-link'), backToHome: document.getElementById('back-to-home'), };
        },
        bindEvents() {
            this.elements.themeMenuButton.addEventListener('click', () => this.elements.themeMenu.classList.toggle('hidden'));
            this.elements.themeMenu.addEventListener('click', (e) => { e.preventDefault(); const theme = e.target.dataset.theme; if (theme) { this.elements.body.className = `antialiased ${theme}`; this.elements.themeMenu.classList.add('hidden'); } });
            this.elements.tabsContainer.addEventListener('click', (e) => { e.preventDefault(); const tabLink = e.target.closest('.tab-link'); if (tabLink) this.showHomeTab(tabLink.dataset.tab); });
            const goHome = (e) => { e.preventDefault(); history.pushState({ path: 'home' }, '', '#'); this.router(); };
            this.elements.homeLink.addEventListener('click', goHome);
            this.elements.backToHome.addEventListener('click', goHome);
            window.addEventListener('popstate', () => this.router());
        },
        createToolCards() {
            this.elements.aiToolsGrid.innerHTML = ''; this.elements.generalToolsGrid.innerHTML = '';
            const createCard = (tool) => {
                const card = document.createElement('a'); card.href = `#${tool.id}`; card.className = 'tool-card p-6 rounded-2xl flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-300 no-underline';
                card.style.backgroundColor='var(--card-bg)'; card.style.color='var(--primary-color)';
                card.innerHTML = `<div class="mb-4">${Icons[tool.id] || ''}</div><h3 class="text-xl font-bold mb-2" style="color: var(--text-color);">${tool.name}</h3>`;
                card.addEventListener('click', (e) => { e.preventDefault(); history.pushState({ path: tool.id }, '', card.href); this.router(); });
                return card;
            };
            Tools.ai.forEach(tool => this.elements.aiToolsGrid.appendChild(createCard(tool)));
            Tools.general.forEach(tool => this.elements.generalToolsGrid.appendChild(createCard(tool)));
        },
        showHomeTab(tabId) {
            this.elements.tabsContainer.querySelectorAll('.tab-link').forEach(l => {l.classList.remove('active-tab')});
            const activeLink = this.elements.tabsContainer.querySelector(`[data-tab="${tabId}"]`);
            if (activeLink) { activeLink.classList.add('active-tab'); }
            document.querySelectorAll('#tabs-content .tab-content').forEach(c => c.classList.add('hidden'));
            if(tabId === 'drawing-board') { history.pushState({ path: 'drawing-board' }, '', '#drawing-board'); this.router(); } 
            else { const grid = document.getElementById(`${tabId}-grid`); if (grid) grid.classList.remove('hidden'); }
        },
        router() {
            const hash = window.location.hash.substring(1);
            const allTools = [...Tools.ai, ...Tools.general, {id: 'drawing-board', name: 'Ø£Ø³ØªÙˆØ¯ÙŠÙˆ Ø§Ù„Ø±Ø³Ù…'}];
            const tool = allTools.find(t => t.id === hash);
            clearInterval(this.state.clockInterval); clearInterval(this.state.stopwatchInterval); clearInterval(this.state.timerInterval);
            if (tool) { this.renderToolPage(tool); } 
            else {
                this.elements.homePage.classList.remove('inactive-left'); this.elements.homePage.classList.add('active');
                this.elements.toolPage.classList.remove('active'); this.elements.toolPage.classList.add('inactive-right');
                this.createToolCards();
            }
        },
        renderToolPage(tool) {
            this.elements.homePage.classList.remove('active'); this.elements.homePage.classList.add('inactive-left');
            this.elements.toolPage.classList.remove('inactive-right'); this.elements.toolPage.classList.add('active');
            this.elements.toolPageTitle.textContent = tool.name;
            const implementation = ToolImplementations[tool.id];
            if (implementation) {
                this.elements.toolPageBody.innerHTML = implementation.html;
                setTimeout(() => { try { implementation.logic(); } catch(e) { console.error(`Error initializing tool ${tool.id}:`, e); this.elements.toolPageBody.innerHTML = `<p class="text-red-500">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø©.</p>` } }, 50);
            } else { this.elements.toolPageBody.innerHTML = `<p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø©.</p>`; }
        },
        initDrawingCanvas() {
            if (this.state.fabricCanvas) { this.state.fabricCanvas.dispose(); this.state.fabricCanvas = null; }
            const canvasEl = document.getElementById('drawing-canvas-fabric'); if(!canvasEl) return;
            const container = canvasEl.parentElement; canvasEl.width = container.clientWidth; canvasEl.height = container.clientHeight > 400 ? container.clientHeight : 500;
            this.state.fabricCanvas = new fabric.Canvas(canvasEl, { isDrawingMode: true, backgroundColor: '#fff' });
            this.bindDrawingEvents();
            this.state.fabricCanvas.freeDrawingBrush.color = document.getElementById('stroke-color').value;
            this.state.fabricCanvas.freeDrawingBrush.width = parseInt(document.getElementById('stroke-width').value, 10);
            this.state.undoHistory = []; this.state.redoHistory = []; this.saveCanvasState();
        },
        saveCanvasState() { this.state.redoHistory = []; this.state.undoHistory.push(JSON.stringify(this.state.fabricCanvas)); },
        undo() { if (this.state.undoHistory.length > 1) { const currentState = this.state.undoHistory.pop(); this.state.redoHistory.push(currentState); const prevState = this.state.undoHistory[this.state.undoHistory.length - 1]; this.state.fabricCanvas.loadFromJSON(prevState, () => this.state.fabricCanvas.renderAll()); } },
        redo() { if (this.state.redoHistory.length > 0) { const redoState = this.state.redoHistory.pop(); this.state.undoHistory.push(redoState); this.state.fabricCanvas.loadFromJSON(redoState, () => this.state.fabricCanvas.renderAll()); } },
        bindDrawingEvents() {
             const canvas = this.state.fabricCanvas; if (!canvas) return;
             document.getElementById('undo-btn').onclick = () => this.undo();
             document.getElementById('redo-btn').onclick = () => this.redo();
             document.getElementById('drawing-tools-container').addEventListener('click', e => { const button = e.target.closest('.drawing-tool'); if (!button) return; document.querySelectorAll('#drawing-tools-container .drawing-tool').forEach(b => b.classList.remove('active')); button.classList.add('active'); this.state.currentDrawingTool = button.dataset.tool; canvas.isDrawingMode = (this.state.currentDrawingTool === 'brush'); });
             document.getElementById('stroke-color').addEventListener('input', e=>{const c=e.target.value;canvas.freeDrawingBrush.color=c;if(canvas.getActiveObject())canvas.getActiveObject().set('stroke',c);canvas.renderAll()});
             document.getElementById('fill-color').addEventListener('input', e=>{if(canvas.getActiveObject())canvas.getActiveObject().set('fill',e.target.value);canvas.renderAll()});
             document.getElementById('stroke-width').addEventListener('input', e=>{const w=parseInt(e.target.value,10);canvas.freeDrawingBrush.width=w;if(canvas.getActiveObject())canvas.getActiveObject().set('strokeWidth',w);canvas.renderAll()});
             document.getElementById('opacity').addEventListener('input', e=>{if(canvas.getActiveObject())canvas.getActiveObject().set('opacity',parseFloat(e.target.value));canvas.renderAll()});
             document.getElementById('delete-object').addEventListener('click', ()=>{canvas.getActiveObjects().forEach(o=>canvas.remove(o));canvas.discardActiveObject().renderAll(); this.saveCanvasState()});
             canvas.on('mouse:down', o=>{const t=this.state.currentDrawingTool;if(['brush','select'].includes(t))return;this.state.isDrawingShape=!0;const p=canvas.getPointer(o.e);this.state.shapeStartX=p.x;this.state.shapeStartY=p.y;const sC=document.getElementById('stroke-color').value,fC=document.getElementById('fill-color').value,sW=parseInt(document.getElementById('stroke-width').value,10);let sh;if(t==='rect')sh=new fabric.Rect({left:p.x,top:p.y,width:0,height:0,stroke:sC,fill:fC,strokeWidth:sW});else if(t==='circle')sh=new fabric.Circle({left:p.x,top:p.y,radius:0,stroke:sC,fill:fC,strokeWidth:sW});else if(t==='line')sh=new fabric.Line([p.x,p.y,p.x,p.y],{stroke:sC,strokeWidth:sW});else if(t==='text')sh=new fabric.IText('Ø§ÙƒØªØ¨ Ù‡Ù†Ø§',{left:p.x,top:p.y,fill:sC,fontSize:30,fontFamily:'Cairo'});if(sh){this.state.currentShape=sh;canvas.add(this.state.currentShape);if(t==='text'){this.state.isDrawingShape=!1;this.state.currentShape=null;canvas.setActiveObject(sh);document.querySelector('[data-tool="select"]').click()}}});
             canvas.on('mouse:move', o=>{if(!this.state.isDrawingShape||!this.state.currentShape)return;const p=canvas.getPointer(o.e),sh=this.state.currentShape,sX=this.state.shapeStartX,sY=this.state.shapeStartY;if(sh.type==='rect')sh.set({width:Math.abs(p.x-sX),height:Math.abs(p.y-sY),left:p.x>sX?sX:p.x,top:p.y>sY?sY:p.y});else if(sh.type==='circle'){const r=Math.sqrt(Math.pow(p.x-sX,2)+Math.pow(p.y-sY,2))/2;sh.set({radius:r,left:sX-r,top:sY-r})}else if(sh.type==='line')sh.set({x2:p.x,y2:p.y});canvas.renderAll()});
             canvas.on('mouse:up', ()=>{if(this.state.currentShape)this.state.currentShape.setCoords();this.state.isDrawingShape=!1;this.state.currentShape=null;this.saveCanvasState()});
        },
    };
    
    // --- API HELPERS ---
    const callGemini=async(p)=>{const b={contents:[{role:"user",parts:[{text:p}]}]},k="",u=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${k}`,r=await fetch(u,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(b)});if(!r.ok)throw new Error(r.statusText);const d=await r.json();if(d.candidates&&d.candidates[0])return d.candidates[0].content.parts[0].text;throw new Error('No content')};
    const callImagen=async(p)=>{const b={instances:[{prompt:p}],parameters:{"sampleCount":1}},k="",u=`https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${k}`,r=await fetch(u,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(b)});if(!r.ok)throw new Error(r.statusText);const d=await r.json();if(d.predictions&&d.predictions[0])return`data:image/png;base64,${d.predictions[0].bytesBase64Encoded}`;throw new Error('No image')};
    
    // --- DATA & ICONS ---
    const Tools = {
        ai: [ { id: 'gemini-chat', name: 'Ù…Ø³Ø§Ø¹Ø¯ Gemini' }, { id: 'image-generator', name: 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±' }, { id: 'text-summarizer', name: 'Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØµÙˆØµ' }, { id: 'idea-generator', name: 'Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø£ÙÙƒØ§Ø±' } ],
        general: [ { id: 'calculator', name: 'Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©' }, { id: 'timer-clock', name: 'Ø³Ø§Ø¹Ø© ÙˆÙ…Ù†Ø¨Ù‡ Ø¹Ø§Ù„Ù…ÙŠ' }, { id: 'todo-list', name: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…' }, { id: 'unit-converter', name: 'Ù…Ø­ÙˆÙ„ Ø§Ù„ÙˆØ­Ø¯Ø§Øª' }, { id: 'qr-generator', name: 'Ù‚Ø§Ø±Ø¦ ÙˆÙ…Ù†Ø´Ø¦ QR' }, { id: 'text-editor', name: 'Ù…Ø­Ø±Ø± Ù†ØµÙˆØµ' }, { id: 'password-generator', name: 'Ù…ÙˆÙ„Ù‘Ø¯ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±' }, { id: 'bmi-calculator', name: 'Ø­Ø§Ø³Ø¨Ø© BMI' }, { id: 'loan-calculator', name: 'Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„' }, { id: 'gradient-generator', name: 'Ù…ÙˆÙ„Ø¯ Ø§Ù„ØªØ¯Ø±Ø¬ Ø§Ù„Ù„ÙˆÙ†ÙŠ' }, { id: 'palette-extractor', name: 'ÙƒØ§Ø´Ù Ø§Ù„Ø£Ù„ÙˆØ§Ù†' }, { id: 'diff-checker', name: 'Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù†ØµÙˆØµ' }, { id: 'hashtag-generator', name: 'Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‡Ø§Ø´ØªØ§Ø¬Ø§Øª' }, { id: 'ocr-reader', name: 'Ù…Ø³ØªØ®Ø±Ø¬ Ø§Ù„Ù†Øµ Ù…Ù† ØµÙˆØ±Ø©' }, { id: 'date-calculator', name: 'Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®' }, { id: 'chart-maker', name: 'ØµØ§Ù†Ø¹ Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª' }, { id: 'random-generator', name: 'Ù…ÙˆÙ„Ø¯ Ø£Ø±Ù‚Ø§Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©' }, { id: 'json-formatter', name: 'Ù…Ù†Ø³Ù‚ JSON' }, { id: 'pomodoro-timer', name: 'Ø³Ø§Ø¹Ø© Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ' }, { id: 'text-analyzer', name: 'Ù…Ø­Ù„Ù„ Ø§Ù„Ù†ØµÙˆØµ' }, ],
    };
    const Icons = {'gemini-chat': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M20 12c0-1.1-.9-2-2-2h-1V7c0-2.76-2.24-5-5-5S7 4.24 7 7v3H6c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8zM9 7c0-1.66 1.34-3 3-3s3 1.34 3 3v3H9V7zm8 11H7v-6h10v6z"/><path d="M12 15c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>`, 'image-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>`, 'text-summarizer': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-1 9H7v-2h6v2zm3-4H7V5h9v2zm-3 8H7v-2h6v2z"/></svg>`, 'idea-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c.77 0 1.52-.09 2.25-.26.23-.05.47-.09.7-.14C19.91 20.48 22 16.51 22 12c0-4.99-3.69-9.12-8.44-9.84.09-.12.18-.24.27-.36.31-.41.57-.86.73-1.34C15.02.19 14.54 0 14 0c-.43 0-.82.26-1 .64-.32.67-.82 1.18-1.41 1.52-.39.22-.8.39-1.22.51-.59.16-1.2.23-1.81.23C7.4 2.9.19 2.9 6 3.54c-1.35 1.7-2 3.8-2 6 0 .75.1 1.48.29 2.17.06.24.14.47.22.7.27.75.61 1.45 1.02 2.08.11.17.23.33.34.5.34.5.73.96 1.15 1.38.41.4.85.76 1.32 1.07.72.48 1.53.81 2.39.98.28.06.56.09.84.13.9.12 1.81.18 2.74.18 5.52 0 10-4.48 10-10S17.52 2 12 2z"/></svg>`, 'calculator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-2h2v2zm0-4H7v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm4 4h-2v-2h2v2zm0-4h-2v-2h2v2zm-4-4H7V7h10v2z"/></svg>`, 'timer-clock': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>`, 'todo-list': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M22 7h-9v2h9V7zm0 4h-9v2h9v-2zm0 4h-9v2h9v-2zM5.5 7c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2h-4zM9 16H6v-5h3v5zM3 3h12v2H3V3z"/></svg>`, 'unit-converter': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M16 14h-2v2h2v-2zm-4-4h-2v2h2v-2zM10 2H8v2h2V2zM6 2H4v2h2V2zm14 10v-2h-2V8h-2V6h-2V4h-2V2h-2v2h2v2h2v2h2v2h2v2h-2v2h2v-2zm-6-2h-2v2h2v-2zM4 14H2v-2h2v2zm4-4h2V8H8v2zm-4 8h2v-2H4v2zm8 2h-2v-2h2v2zM8 20H6v-2h2v2z"/></svg>`, 'qr-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M3 11h8V3H3v8zm2-6h4v4H5V5zm8-2v8h8V3h-8zm6 6h-4V5h4v4zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm13-2h-2v2h2v-2zm-4 0h-2v2h2v-2zm6 0h-2v2h2v-2zm-8 4h-2v2h2v-2zm-4 0h-2v2h2v-2zm10 2h-2v2h2v-2z"/></svg>`, 'text-editor': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M15 4v3h3.5L15 4zM6 2h10l4 4v14c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2zm0 14h12v-2H6v2zm8-4H6v-2h8v2zm0-4H6V8h8v2z"/></svg>`, 'password-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"/></svg>`, 'bmi-calculator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7 13.5c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3zm9.5-3c0 1.65-1.35 3-3 3s-3-1.35-3-3 1.35-3 3-3 3 1.35 3 3z"/></svg>`, 'loan-calculator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM10.5 17h-1c-.28 0-.5-.22-.5-.5v-9c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v9c0 .28-.22.5-.5.5zm4 0h-1c-.28 0-.5-.22-.5-.5v-9c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v9c0 .28-.22.5-.5.5zM7 11.5v-1c0-.28.22-.5.5-.5s.5.22.5.5v1c0 .28-.22.5-.5.5s-.5-.22-.5-.5z"/></svg>`, 'gradient-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.74-3.76C7.62 17.38 9.21 18 11 18v-2c-1.38 0-2.63-.56-3.54-1.46L6.26 16.24zm11.28-1.7C16.63 15.44 15.38 16 14 16v-2c.79 0 1.5-.35 2-.88l1.54 1.42z"/></svg>`, 'palette-extractor': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M13,12A1.5,1.5 0 0,1 11.5,10.5A1.5,1.5 0 0,1 13,9A1.5,1.5 0 0,1 14.5,10.5A1.5,1.5 0 0,1 13,12M8.5,12A1.5,1.5 0 0,1 7,10.5A1.5,1.5 0 0,1 8.5,9A1.5,1.5 0 0,1 10,10.5A1.5,1.5 0 0,1 8.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3Z"/></svg>`, 'diff-checker': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M18 2h-8L4 8v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm-2-4h-2v-2h2v2zm4 4h-2v-2h2v2z"/></svg>`, 'hashtag-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M11 15h2v2h-2v-2zm-2-2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2v-2zM7 11h2v2H7v-2zm8 0h2v2h-2v-2zm-4-2h2v2h-2V9zM9 7h2v2H9V7zm4 0h2v2h-2V7z"/></svg>`, 'ocr-reader': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM8 11H6v-1h2v1zm0-2H6V8h2v1zm4 3H6v-1h6v1zm0-2H6v-1h6v1zm4 2h-3v-1h3v1zm0-2h-3v-1h3v1z"/></svg>`, 'date-calculator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>`, 'chart-maker': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M22 21H2V3h2v16h18v2zM18 5v12h-2V5h2zM14 9v8h-2V9h2zm-4 4v4H8v-4h2z"/></svg>`, 'random-generator': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M21,14.5A2.5,2.5 0 0,0 18.5,12A2.5,2.5 0 0,0 16,14.5A2.5,2.5 0 0,0 18.5,17A2.5,2.5 0 0,0 21,14.5M21,3.5A2.5,2.5 0 0,0 18.5,1A2.5,2.5 0 0,0 16,3.5A2.5,2.5 0 0,0 18.5,6A2.5,2.5 0 0,0 21,3.5M9,14.5A2.5,2.5 0 0,0 6.5,12A2.5,2.5 0 0,0 4,14.5A2.5,2.5 0 0,0 6.5,17A2.5,2.5 0 0,0 9,14.5M9,3.5A2.5,2.5 0 0,0 6.5,1A2.5,2.5 0 0,0 4,3.5A2.5,2.5 0 0,0 6.5,6A2.5,2.5 0 0,0 9,3.5Z"/></svg>`, 'json-formatter': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M14 10v4h-4v-4h4m-10 0v4H0v-4h4m11 5v4h-4v-4h4m-6 0v4H5v-4h4M9 4v4H5V4h4M4 3v18h16V3H4z"/></svg>`, 'pomodoro-timer': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8zm-1-12h2v5h-2zm0 6h2v2h-2z"/></svg>`, 'text-analyzer': `<svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12"><path d="M3 10h11v2H3zm0-4h11v2H3zm0 8h7v2H3zm13-6v8h5v-8h-5zm3 6h-1v-4h1v4z"/></svg>`,};
    const ToolImplementations = {'drawing-board':{html:`<div class="w-full max-w-7xl mx-auto rounded-lg shadow-2xl p-2 md:p-4" style="background-color: var(--card-bg);"> <div class="flex flex-col md:flex-row gap-4"> <div id="drawing-tools-container" class="flex flex-row md:flex-col flex-wrap justify-center gap-2 p-2 rounded-lg" style="background-color: var(--input-bg);"> <button data-tool="select" class="drawing-tool p-3 rounded-lg" title="ØªØ­Ø¯ÙŠØ¯"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M10.152 1.314A.924.924 0 009.23.4l-8.82 8.82a.924.924 0 000 1.307l4.41 4.41a.924.924 0 001.307 0l8.82-8.82a.924.924 0 000-1.307l-4.795-4.41zM3.451 9.727L9.23 3.948l4.41 4.053-5.779 5.779-4.41-4.053z"/></svg></button> <button data-tool="brush" class="drawing-tool active p-3 rounded-lg" title="ÙØ±Ø´Ø§Ø©"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"/><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"/></svg></button> <button data-tool="line" class="drawing-tool p-3 rounded-lg" title="Ø®Ø·"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 3.293a1 1 0 010 1.414L3.414 17.707a1 1 0 01-1.414-1.414L15.293 2.293a1 1 0 011.414 0z"/></svg></button> <button data-tool="rect" class="drawing-tool p-3 rounded-lg" title="Ù…Ø³ØªØ·ÙŠÙ„"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V3zm1 1v10h10V4H4z" clip-rule="evenodd"/></svg></button> <button data-tool="circle" class="drawing-tool p-3 rounded-lg" title="Ø¯Ø§Ø¦Ø±Ø©"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM2 10a8 8 0 1116 0 8 8 0 01-16 0z" clip-rule="evenodd"/></svg></button> <button data-tool="text" class="drawing-tool p-3 rounded-lg" title="Ù†Øµ"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 3h-1.5A3.25 3.25 0 006 6.25v1.5a.75.75 0 001.5 0v-1.5A1.75 1.75 0 019.25 4.5h1.5A1.75 1.75 0 0112.5 6.25v1.5a.75.75 0 001.5 0v-1.5A3.25 3.25 0 0010.75 3zM7.75 12a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z"/></svg></button> </div> <div class="flex-1 h-[60vh] md:h-auto rounded-md overflow-hidden"><canvas id="drawing-canvas-fabric"></canvas></div> <div class="flex flex-row md:flex-col flex-wrap justify-center items-center gap-4 p-2 rounded-lg" style="background-color: var(--input-bg);"> <div class="flex gap-2"><button id="undo-btn" class="p-3 tool-control" title="ØªØ±Ø§Ø¬Ø¹"><svg class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/></svg></button><button id="redo-btn" class="p-3 tool-control" title="ØªÙ‚Ø¯Ù…"><svg class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 3.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 9H9a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h5.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„Ø­Ø¯</label><input type="color" id="stroke-color" value="#8A2BE2" class="w-10 h-10 p-0 m-0 border-none rounded cursor-pointer"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„ØªØ¹Ø¨Ø¦Ø©</label><input type="color" id="fill-color" value="#ffffff" class="w-10 h-10 p-0 m-0 border-none rounded cursor-pointer"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø­Ø¬Ù… Ø§Ù„Ø­Ø¯</label><input type="range" id="stroke-width" min="1" max="50" value="5" class="w-20"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„Ø´ÙØ§ÙÙŠØ©</label><input type="range" id="opacity" min="0" max="1" step="0.05" value="1" class="w-20"></div> <div class="tool-control flex flex-col items-center"><button id="delete-object" class="p-3" title="Ø­Ø°Ù"><svg class="w-6 h-6 text-red-500 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd"/></svg></button></div> </div> </div></div>`, logic:() => HovaniApp.initDrawingCanvas()},
        'gemini-chat': {html: `<div class="flex flex-col h-[70vh]"><div id="chat-window" class="flex-1 overflow-y-auto p-4 space-y-4 rounded-lg flex flex-col" style="background: var(--input-bg);"></div><div class="p-4 flex items-center gap-2"><input type="text" id="chat-input" class="flex-1 p-3 rounded-lg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."><button id="chat-send" class="p-3 text-white font-bold">Ø¥Ø±Ø³Ø§Ù„</button></div></div>`, logic:()=>{const c=document.getElementById('chat-window'),i=document.getElementById('chat-input'),s=document.getElementById('chat-send');const a=async()=>{const p=i.value.trim();if(!p)return;b(p,'user');i.value='';const t=b('ÙŠÙÙƒØ±...','bot',!0);try{const r=await callGemini(p);t.remove();b(r,'bot')}catch(e){t.textContent='Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.'}};s.addEventListener('click',a);i.addEventListener('keypress',e=>{if(e.key==='Enter')a()});function b(t,s,i){const d=document.createElement('div');d.className=`max-w-xs md:max-w-md p-3 rounded-lg ${s==='user'?'self-end':'self-start'}`;d.style.backgroundColor=s==='user'?'var(--primary-color)':'var(--input-bg)';d.style.color=s==='user'?'#fff':'var(--text-color)';if(i)d.classList.add('thinking');d.textContent=t;c.appendChild(d);c.scrollTop=c.scrollHeight;return d}}},
        'image-generator': {html: `<div class="flex flex-col items-center gap-4"><textarea id="image-prompt" class="w-full p-3 rounded-lg" placeholder="Ù…Ø«Ø§Ù„: Ù‚Ø· Ø±Ø§Ø¦Ø¯ ÙØ¶Ø§Ø¡ ÙŠØ·ÙÙˆ ÙÙŠ Ù…Ø¬Ø±Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ©"></textarea><button id="generate-image-btn" class="px-6 py-3 text-white font-bold">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©</button><div id="image-output" class="mt-4 w-full max-w-lg h-auto aspect-square flex items-center justify-center rounded-lg" style="background: var(--input-bg);"><span class="text-gray-400">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</span></div></div>`, logic:()=>{const b=document.getElementById('generate-image-btn'),p=document.getElementById('image-prompt'),o=document.getElementById('image-output');b.addEventListener('click',async()=>{if(!p.value)return;o.innerHTML=`<div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4" style="border-color: var(--primary-color);"></div>`;try{const i=await callImagen(p.value);o.innerHTML=`<img src="${i}" alt="Generated Image" class="w-full h-full object-contain rounded-lg">`}catch(e){o.textContent='ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙˆØ±Ø©.'}})}},
        'text-summarizer': {html: `<div class="flex flex-col gap-4"><textarea id="text-to-summarize" class="w-full h-48 p-3 rounded-lg" placeholder="Ø£Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ø·ÙˆÙŠÙ„ Ù‡Ù†Ø§..."></textarea><button id="summarize-btn" class="px-6 py-3 text-white font-bold self-center">ØªÙ„Ø®ÙŠØµ Ø§Ù„Ù†Øµ</button><div id="summary-output" class="mt-4 p-4 rounded-lg min-h-[100px]" style="background: var(--input-bg);"><span class="opacity-50">Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…Ù„Ø®Øµ Ù‡Ù†Ø§...</span></div></div>`, logic:()=>{const b=document.getElementById('summarize-btn'),i=document.getElementById('text-to-summarize'),o=document.getElementById('summary-output');b.addEventListener('click',async()=>{if(!i.value)return;o.innerHTML=`<div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 mx-auto" style="border-color: var(--primary-color);"></div>`;try{const r=await callGemini(`Ù„Ø®Øµ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ:\n\n${i.value}`);o.textContent=r}catch(e){o.textContent='ÙØ´Ù„ Ø§Ù„ØªÙ„Ø®ÙŠØµ.'}})}},
        'idea-generator': {html: `<div class="flex flex-col items-center gap-4"><input type="text" id="idea-prompt" class="w-full p-3 rounded-lg" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙˆØ¶ÙˆØ¹Ù‹Ø§, Ù…Ø«Ù„Ø§Ù‹: 'Ø£ÙÙƒØ§Ø± Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙˆØ§Ù„'"><button id="generate-idea-btn" class="px-6 py-3 text-white font-bold">ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø±</button><div id="idea-output" class="mt-4 p-4 rounded-lg w-full min-h-[200px]" style="background: var(--input-bg);"><span class="opacity-50">Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø£ÙÙƒØ§Ø± Ù‡Ù†Ø§...</span></div></div>`, logic:()=>{const b=document.getElementById('generate-idea-btn'),i=document.getElementById('idea-prompt'),o=document.getElementById('idea-output');b.addEventListener('click',async()=>{if(!i.value)return;o.innerHTML=`<div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 mx-auto" style="border-color: var(--primary-color);"></div>`;try{const r=await callGemini(`Ø£Ø¹Ø·Ù†ÙŠ 5 Ø£ÙÙƒØ§Ø± Ø­ÙˆÙ„: ${i.value}`);o.innerHTML=r.replace(/\n/g,'<br>')}catch(e){o.textContent='ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£ÙÙƒØ§Ø±.'}})}},
        'calculator': {html:`<div class="max-w-sm mx-auto p-4 rounded-xl shadow-lg" style="background-color:rgba(0,0,0,0.2);"><div id="calc-history" class="w-full h-12 text-sm text-right opacity-50 p-2 overflow-hidden"></div><input type="text" id="calc-display" class="w-full h-20 text-4xl text-left rtl:text-right p-4 mb-4 rounded-lg bg-transparent border-b-2" readonly><div id="calc-buttons" class="grid grid-cols-4 gap-2"></div></div>`,logic:()=>{const d=document.getElementById('calc-display'),h=document.getElementById('calc-history'),b=document.getElementById('calc-buttons'),l=['C','(',')','/','7','8','9','*','4','5','6','-','1','2','3','+','0','.','DEL','='];l.forEach(v=>{const btn=document.createElement('button');btn.textContent=v;btn.className='calc-btn';if(['/','*','-','+','(',')'].includes(v))btn.classList.add('op-btn');if(v==='=')btn.classList.add('eq-btn');btn.addEventListener('click',()=>{if(v==='C'){d.value='';h.textContent=''}else if(v==='DEL')d.value=d.value.slice(0,-1);else if(v==='=')try{h.textContent=d.value+' =';d.value=eval(d.value.replace(/[^-()\d/*+.]/g,''))}catch{d.value='Ø®Ø·Ø£'}else d.value+=v});b.appendChild(btn)})}},
        'timer-clock': {html:`<div class="flex flex-col items-center gap-8"><div id="clock-display" class="text-6xl font-bold tracking-wider"></div><div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full"><div class="text-center p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-2xl mb-4" style="color:var(--primary-color);">Ø³Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù</h4><div id="stopwatch-display" class="text-4xl mb-4 font-mono">00:00:00</div><div class="flex gap-4 justify-center"><button id="sw-start" class="px-4 py-2">Ø§Ø¨Ø¯Ø£</button><button id="sw-stop" class="px-4 py-2">Ø¥ÙŠÙ‚Ø§Ù</button><button id="sw-reset" class="px-4 py-2">Ø¥Ø¹Ø§Ø¯Ø©</button></div></div><div class="text-center p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-2xl mb-4" style="color:var(--primary-color);">Ø§Ù„Ù…Ø¤Ù‚Øª</h4><div id="timer-display" class="text-4xl mb-4 font-mono">00:00</div><div class="flex gap-2 justify-center items-center mb-2"><input id="timer-minutes" type="number" min="0" value="5" class="w-16 p-2 text-center bg-transparent border-b-2"><span>Ø¯Ù‚Ø§Ø¦Ù‚</span></div><div class="flex gap-4 justify-center"><button id="timer-start" class="px-4 py-2">Ø§Ø¨Ø¯Ø£</button><button id="timer-reset" class="px-4 py-2">Ø¥Ø¹Ø§Ø¯Ø©</button></div></div><div class="text-center p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-2xl mb-4" style="color:var(--primary-color);">Ø§Ù„Ù…Ù†Ø¨Ù‡</h4><div class="flex gap-2 justify-center items-center mb-2"><input type="time" id="alarm-time" class="p-2 bg-transparent border-b-2"><button id="set-alarm" class="px-4 py-2">Ø¶Ø¨Ø·</button></div><div id="alarm-status" class="mt-2 h-6"></div></div></div></div>`,logic:()=>{clearInterval(HovaniApp.state.clockInterval);clearInterval(HovaniApp.state.stopwatchInterval);clearInterval(HovaniApp.state.timerInterval);const c=document.getElementById('clock-display'),sD=document.getElementById('stopwatch-display'),tD=document.getElementById('timer-display');let sT=0,tT=parseInt(document.getElementById('timer-minutes').value)*60||0,alarmTime=null;tD.textContent=fT(tT);HovaniApp.state.clockInterval=setInterval(()=>{const now=new Date();c.textContent=now.toLocaleTimeString('ar-SA');if(alarmTime&&now.getHours()===alarmTime.getHours()&&now.getMinutes()===alarmTime.getMinutes()&&now.getSeconds()===alarmTime.getSeconds()){try{const synth=new Tone.Synth().toDestination();synth.triggerAttackRelease("C4","8n")}catch(e){}document.getElementById('alarm-status').textContent='ğŸ”” ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø¨Ù‡!';setTimeout(()=>alarmTime=null,1000)}},1000);function fS(ms){const ts=Math.floor(ms/1000);return`${Math.floor(ts/60).toString().padStart(2,'0')}:${(ts%60).toString().padStart(2,'0')}:${Math.floor((ms%1000)/10).toString().padStart(2,'0')}`}function fT(s){return`${Math.floor(s/60).toString().padStart(2,'0')}:${(s%60).toString().padStart(2,'0')}`}document.getElementById('sw-start').addEventListener('click',()=>{if(HovaniApp.state.stopwatchInterval)return;const st=Date.now()-sT;HovaniApp.state.stopwatchInterval=setInterval(()=>{sT=Date.now()-st;sD.textContent=fS(sT)},10)});document.getElementById('sw-stop').addEventListener('click',()=>{clearInterval(HovaniApp.state.stopwatchInterval);HovaniApp.state.stopwatchInterval=null});document.getElementById('sw-reset').addEventListener('click',()=>{clearInterval(HovaniApp.state.stopwatchInterval);HovaniApp.state.stopwatchInterval=null;sT=0;sD.textContent='00:00:00'});const tM=document.getElementById('timer-minutes');document.getElementById('timer-start').addEventListener('click',()=>{if(HovaniApp.state.timerInterval||tT<=0)return;HovaniApp.state.timerInterval=setInterval(()=>{tT--;tD.textContent=fT(tT);if(tT<=0){clearInterval(HovaniApp.state.timerInterval);HovaniApp.state.timerInterval=null;tD.textContent='Ø§Ù†ØªÙ‡Ù‰!'}},1000)});document.getElementById('timer-reset').addEventListener('click',()=>{clearInterval(HovaniApp.state.timerInterval);HovaniApp.state.timerInterval=null;tT=parseInt(tM.value)*60||0;tD.textContent=fT(tT)});tM.addEventListener('input',()=>{tT=parseInt(tM.value)*60||0;if(!HovaniApp.state.timerInterval)tD.textContent=fT(tT)});document.getElementById('set-alarm').addEventListener('click',()=>{const timeValue=document.getElementById('alarm-time').value;if(timeValue){const [hours,minutes]=timeValue.split(':');alarmTime=new Date();alarmTime.setHours(hours,minutes,0,0);document.getElementById('alarm-status').textContent=`ØªÙ… Ø¶Ø¨Ø· Ø§Ù„Ù…Ù†Ø¨Ù‡ ÙÙŠ ${alarmTime.toLocaleTimeString('ar-SA',{hour:'2-digit',minute:'2-digit'})}`}})}},
        'todo-list': {html:`<div class="max-w-md mx-auto"><div class="flex gap-2 mb-4"><input type="text" id="todo-input" class="flex-1 p-3" placeholder="Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©..."><button id="add-todo-btn" class="px-5 py-3 text-white font-bold">+</button></div><ul id="todo-list-items" class="space-y-2"></ul></div>`,logic:()=>{const i=document.getElementById('todo-input'),b=document.getElementById('add-todo-btn'),l=document.getElementById('todo-list-items');let t=JSON.parse(localStorage.getItem('hovani-todos'))||[];const s=()=>localStorage.setItem('hovani-todos',JSON.stringify(t));const r=()=>{l.innerHTML='';t.forEach((a,n)=>{const e=document.createElement('li');e.className=`todo-item flex items-center justify-between p-3 rounded-lg ${a.completed?'completed':''}`;e.style.backgroundColor='var(--input-bg)';e.innerHTML=`<span class="flex-1 cursor-pointer">${a.text}</span><button class="delete-btn text-red-500">âœ—</button>`;e.querySelector('span').addEventListener('click',()=>{t[n].completed=!t[n].completed;s();r()});e.querySelector('.delete-btn').addEventListener('click',()=>{t.splice(n,1);s();r()});l.appendChild(e)})};const a=()=>{const c=i.value.trim();if(!c)return;t.push({text:c,completed:!1});i.value='';s();r()};b.addEventListener('click',a);i.addEventListener('keypress',e=>{if(e.key==='Enter')a()});r()}},
        'unit-converter': {html:`<div class="max-w-lg mx-auto space-y-4"><select id="unit-category" class="w-full p-2"></select><div class="flex items-center gap-4"><input type="number" id="unit-input" value="1" class="w-full p-2 bg-transparent border-b-2"><select id="from-unit" class="w-full p-2 bg-transparent border-b-2"></select><span class="text-xl">=</span><input type="text" id="unit-output" class="w-full p-2 bg-transparent border-b-2" readonly><select id="to-unit" class="w-full p-2 bg-transparent border-b-2"></select></div></div>`,logic:()=>{const i=document.getElementById('unit-input'),o=document.getElementById('unit-output'),fS=document.getElementById('from-unit'),tS=document.getElementById('to-unit'),cS=document.getElementById('unit-category');const u={length:{n:"Ø§Ù„Ø·ÙˆÙ„",m:1,km:1e3,cm:.01,mi:1609.34,ft:.3048},weight:{n:"Ø§Ù„ÙˆØ²Ù†",kg:1,g:.001,lb:.453592,oz:.0283495},temperature:{n:"Ø§Ù„Ø­Ø±Ø§Ø±Ø©",c:"c",f:"f",k:"k"},area:{n:"Ø§Ù„Ù…Ø³Ø§Ø­Ø©",sqm:1,sqkm:1e6,sqft:0.092903},volume:{n:"Ø§Ù„Ø­Ø¬Ù…",l:1,ml:0.001,gal:3.78541},data:{n:"Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",B:1,KB:1024,MB:1048576,GB:1073741824}};for(const c in u)cS.innerHTML+=`<option value="${c}">${u[c].n}</option>`;function p(){const c=cS.value;fS.innerHTML='';tS.innerHTML='';for(const unit in u[c]){if(unit==='n')continue;fS.innerHTML+=`<option value="${unit}">${unit}</option>`;tS.innerHTML+=`<option value="${unit}">${unit}</option>`}cO()}function cO(){const c=cS.value,f=fS.value,t=tS.value,v=parseFloat(i.value);if(isNaN(v)){o.value='';return}let r;if(c==='temperature'){if(f===t)r=v;else if(f==='c'&&t==='f')r=v*9/5+32;else if(f==='f'&&t==='c')r=(v-32)*5/9;else if(f==='c'&&t==='k')r=v+273.15;else if(f==='k'&&t==='c')r=v-273.15;else if(f==='f'&&t==='k')r=(v-32)*5/9+273.15;else if(f==='k'&&t==='f')r=(v-273.15)*9/5+32}else{const bV=v*u[c][f];r=bV/u[c][t]}o.value=r.toPrecision(4)}cS.addEventListener('change',p);i.addEventListener('input',cO);fS.addEventListener('change',cO);tS.addEventListener('change',cO);p()}},
        'qr-generator': {html:`<div class="flex flex-col items-center gap-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl"><div class="p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-xl mb-2 text-center" style="color:var(--primary-color)">Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR</h4><input type="text" id="qr-input" class="w-full p-2" placeholder="Ø£Ø¯Ø®Ù„ Ù†ØµÙ‹Ø§ Ø£Ùˆ Ø±Ø§Ø¨Ø·Ù‹Ø§..."><div class="flex items-center justify-center gap-4 mt-2"><label>Ø§Ù„Ù„ÙˆÙ†:</label><input type="color" id="qr-color" value="#000000"></div><div id="qr-code-output" class="mt-4 p-4 bg-white rounded-lg mx-auto w-48 h-48"></div><a id="download-qr-link" class="hidden mt-2 text-center block" style="color:var(--primary-color);">ØªÙ†Ø²ÙŠÙ„</a></div><div class="p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-xl mb-2 text-center" style="color:var(--primary-color)">Ù‚Ø±Ø§Ø¡Ø© Ø±Ù…Ø² QR</h4><input type="file" id="qr-file-input" accept="image/*" class="w-full"><div id="qr-reader-output" class="mt-4 p-2 text-center min-h-[50px] break-words"></div></div></div>`,logic:()=>{const i=document.getElementById('qr-input'),o=document.getElementById('qr-code-output'),d=document.getElementById('download-qr-link'),c=document.getElementById('qr-color'),f=document.getElementById('qr-file-input'),r=document.getElementById('qr-reader-output');const g=()=>{const t=i.value.trim(),color=c.value;if(!t){o.innerHTML='';d.classList.add('hidden');return}o.innerHTML='';new QRCode(o,{text:t,width:160,height:160,colorDark:color,colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});setTimeout(()=>{const canvas=o.querySelector('canvas');if(canvas){d.href=canvas.toDataURL();d.download='qrcode.png';d.classList.remove('hidden')}},100)};i.addEventListener('input',g);c.addEventListener('input',g);f.addEventListener('change',e=>{const file=e.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{const img=new Image();img.onload=()=>{const canvas=document.createElement('canvas'),ctx=canvas.getContext('2d');canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0);const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);const code=jsQR(imageData.data,imageData.width,imageData.height);r.textContent=code?code.data:'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ù…Ø².'};img.src=e.target.result};reader.readAsDataURL(file)});g()}},
        'text-editor': {html:`<div class="flex flex-col h-[70vh]"><div class="flex items-center gap-2 mb-2"><button id="bold-btn" class="p-2 tool-control font-bold">B</button><button id="italic-btn" class="p-2 tool-control italic">I</button><span class="mr-auto text-sm opacity-70"><span id="word-count">0</span> ÙƒÙ„Ù…Ø©, <span id="char-count">0</span> Ø­Ø±Ù</span></div><textarea id="simple-text-area" class="flex-1 w-full p-4" placeholder="Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø©..."></textarea><div class="mt-2"><button id="download-txt" class="px-4 py-2">ØªØ­Ù…ÙŠÙ„ ÙƒÙ€ .txt</button></div></div>`,logic:()=>{const t=document.getElementById('simple-text-area'),w=document.getElementById('word-count'),c=document.getElementById('char-count'),d=document.getElementById('download-txt'),b=document.getElementById('bold-btn'),i=document.getElementById('italic-btn');t.addEventListener('input',()=>{const e=t.value;c.textContent=e.length;w.textContent=e.trim().split(/\s+/).filter(Boolean).length});d.addEventListener('click',()=>{const e=new Blob([t.value],{type:'text/plain'});const a=document.createElement('a');a.href=URL.createObjectURL(e);a.download='hovani-note.txt';a.click();URL.revokeObjectURL(a.href)});b.addEventListener('click',()=>{t.style.fontWeight=t.style.fontWeight==='bold'?'normal':'bold'});i.addEventListener('click',()=>{t.style.fontStyle=t.style.fontStyle==='italic'?'normal':'italic'})}},
        'password-generator': {html:`<div class="max-w-md mx-auto flex flex-col items-center gap-4"><div class="w-full relative p-4 text-center text-2xl font-mono rounded-lg" style="background-color:var(--input-bg);"><span id="password-output"></span><button id="copy-password-btn" class="absolute top-1/2 -translate-y-1/2 left-3 text-sm opacity-50 hover:opacity-100">Ù†Ø³Ø®</button></div><div id="password-strength" class="w-full h-2 rounded-full" style="background:var(--input-bg);"><div id="strength-bar" class="h-full rounded-full transition-all"></div></div><div class="w-full space-y-2"><label class="flex items-center justify-between">Ø·ÙˆÙ„: <span id="length-val">12</span><input type="range" id="password-length" min="6" max="32" value="12" class="w-1/2"></label><label class="flex items-center"><input type="checkbox" id="include-uppercase" class="ml-2" checked>Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø©</label><label class="flex items-center"><input type="checkbox" id="include-numbers" class="ml-2" checked>Ø£Ø±Ù‚Ø§Ù…</label><label class="flex items-center"><input type="checkbox" id="include-symbols" class="ml-2" checked>Ø±Ù…ÙˆØ²</label></div><button id="generate-password-btn" class="w-full mt-4 px-6 py-3 text-white font-bold">Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©</button></div>`,logic:()=>{const o=document.getElementById('password-output'),c=document.getElementById('copy-password-btn'),s=document.getElementById('strength-bar'),p={length:document.getElementById('password-length'),uppercase:document.getElementById('include-uppercase'),numbers:document.getElementById('include-numbers'),symbols:document.getElementById('include-symbols'),generateBtn:document.getElementById('generate-password-btn'),lengthVal:document.getElementById('length-val')},h={lower:'abcdefghijklmnopqrstuvwxyz',upper:'ABCDEFGHIJKLMNOPQRSTUVWXYZ',numbers:'0123456789',symbols:'!@#$%^&*()_+'};const g=()=>{let e=h.lower,t=20;p.uppercase.checked&&(e+=h.upper,t+=20);p.numbers.checked&&(e+=h.numbers,t+=20);p.symbols.checked&&(e+=h.symbols,t+=20);const n=p.length.value;t+=(n-6)*2;let a='';for(let l=0;l<n;l++)a+=e.charAt(Math.floor(Math.random()*e.length));o.textContent=a;u(t)};const u=t=>{s.style.width=`${t}%`;s.style.backgroundColor=t<40?'#ef4444':t<75?'#f59e0b':'#22c55e'};p.length.addEventListener('input',()=>{p.lengthVal.textContent=p.length.value;g()});p.generateBtn.addEventListener('click',g);Object.values(p).forEach(e=>{if(e.type==='checkbox')e.addEventListener('change',g)});c.addEventListener('click',()=>{navigator.clipboard.writeText(o.textContent).then(()=>{c.textContent='ØªÙ…!';setTimeout(()=>c.textContent='Ù†Ø³Ø®',1000)})});g()}},
        'bmi-calculator': {html:`<div class="max-w-sm mx-auto flex flex-col items-center gap-4"><div class="w-full"><label for="bmi-height">Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)</label><input type="number" id="bmi-height" class="w-full mt-1 p-3"></div><div class="w-full"><label for="bmi-weight">Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)</label><input type="number" id="bmi-weight" class="w-full mt-1 p-3"></div><button id="calculate-bmi-btn" class="w-full mt-4 px-6 py-3 text-white font-bold">Ø§Ø­Ø³Ø¨</button><div id="bmi-result" class="mt-4 text-xl text-center"></div></div>`,logic:()=>{const h=document.getElementById('bmi-height'),w=document.getElementById('bmi-weight'),b=document.getElementById('calculate-bmi-btn'),r=document.getElementById('bmi-result');b.addEventListener('click',()=>{const hV=parseFloat(h.value)/100,wV=parseFloat(w.value);if(isNaN(hV)||isNaN(wV)||hV<=0||wV<=0){r.textContent='Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©.';return}const bmi=(wV/(hV*hV)).toFixed(1);let c='';if(bmi<18.5)c='Ù†Ù‚Øµ Ø§Ù„ÙˆØ²Ù†';else if(bmi<24.9)c='ÙˆØ²Ù† Ø·Ø¨ÙŠØ¹ÙŠ';else if(bmi<29.9)c='Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆØ²Ù†';else c='Ø³Ù…Ù†Ø©';r.innerHTML=`Ù…Ø¤Ø´Ø± ÙƒØªÙ„Ø© Ø§Ù„Ø¬Ø³Ù…: <span class="font-bold text-2xl" style="color:var(--primary-color)">${bmi}</span><br>(${c})`})}},
        'loan-calculator': {html:`<div class="max-w-md mx-auto space-y-4"><div><label>Ù…Ø¨Ù„Øº Ø§Ù„Ù‚Ø±Ø¶</label><input type="number" id="loan-amount" class="w-full p-2 mt-1" value="10000"></div><div><label>Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© (%)</label><input type="number" id="loan-interest" class="w-full p-2 mt-1" value="5"></div><div><label>Ù…Ø¯Ø© Ø§Ù„Ù‚Ø±Ø¶ (Ø³Ù†ÙˆØ§Øª)</label><input type="number" id="loan-years" class="w-full p-2 mt-1" value="5"></div><div id="loan-output" class="text-center p-4 rounded-lg" style="background:var(--input-bg);"><h4 class="text-lg">Ø§Ù„Ù‚Ø³Ø· Ø§Ù„Ø´Ù‡Ø±ÙŠ</h4><p class="text-3xl font-bold" id="monthly-payment"></p></div></div>`, logic: () => { const amountEl=document.getElementById('loan-amount'),interestEl=document.getElementById('loan-interest'),yearsEl=document.getElementById('loan-years'),outputEl=document.getElementById('monthly-payment'); function calc() { const P = parseFloat(amountEl.value), annualInterest = parseFloat(interestEl.value), years = parseFloat(yearsEl.value); if(isNaN(P) || isNaN(annualInterest) || isNaN(years) || P<=0 || annualInterest<0 || years<=0) { outputEl.textContent = '0.00'; return; } const r = (annualInterest / 100) / 12, n = years * 12; const M = P * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1); outputEl.textContent = M.toFixed(2); } [amountEl, interestEl, yearsEl].forEach(el => el.addEventListener('input', calc)); calc(); }},
        'gradient-generator': {html:`<div class="flex flex-col md:flex-row gap-4 items-center"><div class="flex-1 w-full h-64 rounded-lg" id="gradient-preview"></div><div class="w-full md:w-1/3 space-y-3"><div class="flex gap-2"><label>Ø§Ù„Ù„ÙˆÙ† 1:</label><input type="color" id="grad-color1" value="#8A2BE2" class="w-full"></div><div class="flex gap-2"><label>Ø§Ù„Ù„ÙˆÙ† 2:</label><input type="color" id="grad-color2" value="#00BFFF" class="w-full"></div><div><label>Ø§Ù„Ø²Ø§ÙˆÙŠØ© (Ø¯Ø±Ø¬Ø©)</label><input type="range" id="grad-angle" min="0" max="360" value="90" class="w-full"></div><textarea id="grad-css" readonly class="w-full h-24 p-2 font-mono text-sm"></textarea></div></div>`, logic: () => { const p=document.getElementById('gradient-preview'),c1=document.getElementById('grad-color1'),c2=document.getElementById('grad-color2'),a=document.getElementById('grad-angle'),o=document.getElementById('grad-css'); function update() { const grad = `linear-gradient(${a.value}deg, ${c1.value}, ${c2.value})`; p.style.background = grad; o.value = `background: ${grad};`; } [c1,c2,a].forEach(el=>el.addEventListener('input', update)); update(); }},
        'palette-extractor': {html:`<div class="flex flex-col items-center gap-4"><p>Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù…Ù†Ù‡Ø§</p><input type="file" id="palette-file" accept="image/*"><div class="mt-4 grid grid-cols-2 md:grid-cols-5 gap-4" id="palette-output"></div></div>`, logic: () => { document.getElementById('palette-file').addEventListener('change', e => { const file = e.target.files[0]; if(!file) return; const reader = new FileReader(); reader.onload = e => { const img = new Image(); img.onload = () => { const canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'); canvas.width=img.width; canvas.height=img.height; ctx.drawImage(img, 0, 0, img.width, img.height); const data = ctx.getImageData(0,0,img.width,img.height).data; const colorCount={}, step=400; for(let i=0; i<data.length; i+=step) { const rgb=`rgb(${data[i]},${data[i+1]},${data[i+2]})`; colorCount[rgb] = (colorCount[rgb] || 0) + 1; } const sortedColors = Object.keys(colorCount).sort((a,b)=>colorCount[b]-colorCount[a]); const output = document.getElementById('palette-output'); output.innerHTML = ''; sortedColors.slice(0,5).forEach(color => { output.innerHTML += `<div class="text-center"><div class="w-24 h-24 rounded-lg" style="background-color:${color};"></div><p class="font-mono text-sm">${color}</p></div>`; }); }; img.src = e.target.result; }; reader.readAsDataURL(file); }); }},
        'diff-checker': {html: `<div class="grid grid-cols-1 md:grid-cols-2 gap-4 h-[70vh]"><textarea id="diff-text1" class="w-full h-full p-2" placeholder="Ø§Ù„Ù†Øµ Ø§Ù„Ø£ÙˆÙ„"></textarea><textarea id="diff-text2" class="w-full h-full p-2" placeholder="Ø§Ù„Ù†Øµ Ø§Ù„Ø«Ø§Ù†ÙŠ"></textarea></div><div class="mt-4 p-4 rounded-lg whitespace-pre-wrap" style="background:var(--input-bg);" id="diff-output"></div>`, logic: () => { const t1=document.getElementById('diff-text1'), t2=document.getElementById('diff-text2'), o=document.getElementById('diff-output'); function check() { const dmp = new diff_match_patch(); const diff = dmp.diff_main(t1.value, t2.value); dmp.diff_cleanupSemantic(diff); o.innerHTML = dmp.diff_prettyHtml(diff); } [t1,t2].forEach(el => el.addEventListener('input', check)); }},
        'hashtag-generator': {html: `<div class="flex flex-col items-center gap-4"><input type="text" id="hashtag-keyword" class="w-full max-w-md p-2" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ©..."><button id="hashtag-generate" class="px-6 py-2">ØªÙˆÙ„ÙŠØ¯ Ù‡Ø§Ø´ØªØ§Ø¬Ø§Øª</button><div id="hashtag-output" class="mt-4 p-4 rounded-lg w-full max-w-md" style="background:var(--input-bg);"></div></div>`, logic: () => { const i=document.getElementById('hashtag-keyword'),b=document.getElementById('hashtag-generate'),o=document.getElementById('hashtag-output'); b.addEventListener('click', async () => { if(!i.value) return; o.innerHTML = '...'; try { const result = await callGemini(`Generate 10 relevant hashtags for the keyword: "${i.value}"`); o.textContent = result; } catch(e) { o.textContent = 'ÙØ´Ù„ Ø§Ù„ØªÙˆÙ„ÙŠØ¯.'; } }); }},
        'ocr-reader': {html: `<div class="flex flex-col items-center gap-4"><p>Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ Ù…Ù†Ù‡Ø§</p><input type="file" id="ocr-file" accept="image/*"><div id="ocr-status" class="mt-2"></div><textarea id="ocr-output" readonly class="w-full h-48 mt-2 p-2"></textarea></div>`, logic: () => { const i=document.getElementById('ocr-file'),s=document.getElementById('ocr-status'),o=document.getElementById('ocr-output'); i.addEventListener('change', async e => { const file = e.target.files[0]; if(!file) return; s.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©...'; try { const { data: { text } } = await Tesseract.recognize(file, 'ara+eng'); o.value = text; s.textContent = 'Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©.'; } catch(err) { s.textContent = 'ÙØ´Ù„ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù†Øµ.'; } }); }},
        'date-calculator': {html: `<div class="max-w-lg mx-auto space-y-4"><div class="grid grid-cols-2 gap-4"><div><label>Ù…Ù† ØªØ§Ø±ÙŠØ®:</label><input type="date" id="date-from" class="w-full p-2"></div><div><label>Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</label><input type="date" id="date-to" class="w-full p-2"></div></div><div id="date-result" class="text-center text-xl p-4 rounded-lg" style="background:var(--input-bg);"></div></div>`, logic: () => { const f=document.getElementById('date-from'),t=document.getElementById('date-to'),r=document.getElementById('date-result'); function calc() { const d1=new Date(f.value), d2=new Date(t.value); if(!f.value || !t.value) return; const diff = Math.abs(d2 - d1); const days = Math.ceil(diff / (1000 * 60 * 60 * 24)); r.textContent = `Ø§Ù„ÙØ§Ø±Ù‚: ${days} ÙŠÙˆÙ….`; } [f,t].forEach(el=>el.addEventListener('change', calc)); }},
        'chart-maker': {html: `<div class="flex flex-col md:flex-row gap-4"><div class="w-full md:w-1/2"><canvas id="chart-canvas"></canvas></div><div class="w-full md:w-1/2 space-y-2"><label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø®Ø·Ø·:</label><select id="chart-type" class="w-full p-2"><option value="bar">Ø£Ø¹Ù…Ø¯Ø©</option><option value="pie">Ø¯Ø§Ø¦Ø±ÙŠ</option><option value="line">Ø®Ø·ÙŠ</option></select><label>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªØ³Ù…ÙŠØ©,Ù‚ÙŠÙ…Ø©):</label><textarea id="chart-data" class="w-full h-48 p-2">ÙŠÙ†Ø§ÙŠØ±,10\nÙØ¨Ø±Ø§ÙŠØ±,20\nÙ…Ø§Ø±Ø³,15</textarea></div></div>`, logic: () => { let chart; const ctx=document.getElementById('chart-canvas').getContext('2d'),type=document.getElementById('chart-type'),data=document.getElementById('chart-data'); function update() { if(chart) chart.destroy(); const lines=data.value.split('\n').filter(l=>l); const labels=lines.map(l=>l.split(',')[0]); const values=lines.map(l=>l.split(',')[1]); chart = new Chart(ctx, { type: type.value, data: { labels, datasets: [{ label: 'Ø¨ÙŠØ§Ù†Ø§Øª', data: values, backgroundColor: ['#8A2BE2', '#00BFFF', '#FF8C00', '#22c55e', '#ef4444'] }] } }); } [type,data].forEach(el=>el.addEventListener('input', update)); update(); }},
        'random-generator': {html: `<div class="max-w-sm mx-auto flex flex-col items-center gap-4"><div><label>Ù…Ù†:</label><input type="number" id="rand-min" value="1" class="p-2 w-24"> <label>Ø¥Ù„Ù‰:</label><input type="number" id="rand-max" value="100" class="p-2 w-24"></div><button id="rand-generate" class="px-6 py-3 text-white font-bold">ØªÙˆÙ„ÙŠØ¯</button><div id="rand-output" class="text-6xl font-bold">?</div></div>`, logic: () => { const min=document.getElementById('rand-min'),max=document.getElementById('rand-max'),btn=document.getElementById('rand-generate'),out=document.getElementById('rand-output'); btn.addEventListener('click', () => { const minV=parseInt(min.value),maxV=parseInt(max.value); out.textContent = Math.floor(Math.random()*(maxV-minV+1))+minV; }); }},
        'json-formatter': {html: `<div class="grid grid-cols-1 md:grid-cols-2 gap-4 h-[70vh]"><textarea id="json-input" class="w-full h-full p-2 font-mono" placeholder="Ø£Ù„ØµÙ‚ JSON Ù‡Ù†Ø§..."></textarea><pre id="json-output" class="w-full h-full p-2 overflow-auto rounded-lg" style="background:var(--input-bg);"></pre></div>`, logic: () => { document.getElementById('json-input').addEventListener('input', e => { const out=document.getElementById('json-output'); try { const parsed = JSON.parse(e.target.value); out.innerHTML = JSON.stringify(parsed, null, 2); } catch (err) { out.textContent = 'JSON ØºÙŠØ± ØµØ§Ù„Ø­'; } }); }},
        'pomodoro-timer': {html: `<div class="flex flex-col items-center gap-4"><div id="pomodoro-display" class="text-8xl font-mono">25:00</div><div class="flex gap-4"><button id="pomodoro-start" class="px-6 py-3 text-white font-bold">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ù…Ù„</button><button id="pomodoro-reset" class="px-6 py-3">Ø¥Ø¹Ø§Ø¯Ø©</button></div><div id="pomodoro-status" class="text-xl"></div></div>`, logic: () => { let timer, seconds=1500, mode='work'; const d=document.getElementById('pomodoro-display'),s=document.getElementById('pomodoro-start'),r=document.getElementById('pomodoro-reset'),st=document.getElementById('pomodoro-status'); function update() { d.textContent = `${Math.floor(seconds/60).toString().padStart(2,'0')}:${(seconds%60).toString().padStart(2,'0')}`; } function start() { if(timer)return; st.textContent = mode==='work' ? 'ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ²!' : 'ÙˆÙ‚Øª Ø§Ù„Ø±Ø§Ø­Ø©!'; timer=setInterval(()=>{ seconds--; update(); if(seconds<=0){ clearInterval(timer); timer=null; mode = mode==='work'?'break':'work'; seconds = mode==='work'?1500:300; st.textContent = 'Ø§Ù†ØªÙ‡Ù‰!'; try{new Tone.Synth().toDestination().triggerAttackRelease("E5","8n")}catch(e){} update(); } },1000); } function reset(){ clearInterval(timer); timer=null; mode='work'; seconds=1500; st.textContent = ''; update(); } s.addEventListener('click', start); r.addEventListener('click', reset); }},
        'text-analyzer': {html: `<div class="flex flex-col gap-4"><textarea id="analyzer-input" class="w-full h-48 p-2"></textarea><div id="analyzer-output" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center"></div></div>`, logic: () => { document.getElementById('analyzer-input').addEventListener('input', e => { const text=e.target.value, words=text.trim().split(/\s+/).filter(Boolean), sentences=text.split(/[.!?]+/).filter(Boolean); const wordCount=words.length, sentCount=sentences.length, charCount=text.length; const avgWordLen = wordCount > 0 ? (words.reduce((acc,w)=>acc+w.length,0)/wordCount).toFixed(2) : 0; document.getElementById('analyzer-output').innerHTML = `<div class="p-2 rounded-lg" style="background:var(--input-bg);"><h4>Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h4><p class="text-2xl font-bold">${wordCount}</p></div><div class="p-2 rounded-lg" style="background:var(--input-bg);"><h4>Ø§Ù„Ø¬Ù…Ù„</h4><p class="text-2xl font-bold">${sentCount}</p></div><div class="p-2 rounded-lg" style="background:var(--input-bg);"><h4>Ø§Ù„Ø£Ø­Ø±Ù</h4><p class="text-2xl font-bold">${charCount}</p></div><div class="p-2 rounded-lg" style="background:var(--input-bg);"><h4>Ù…ØªÙˆØ³Ø· Ø·ÙˆÙ„ Ø§Ù„ÙƒÙ„Ù…Ø©</h4><p class="text-2xl font-bold">${avgWordLen}</p></div>`; }); }},
        'drawing-board': {html: `<div class="w-full max-w-7xl mx-auto rounded-lg shadow-2xl p-2 md:p-4" style="background-color: var(--card-bg);"> <div class="flex flex-col md:flex-row gap-4"> <div id="drawing-tools-container" class="flex flex-row md:flex-col flex-wrap justify-center gap-2 p-2 rounded-lg" style="background-color: var(--input-bg);"> <button data-tool="select" class="drawing-tool p-3 rounded-lg" title="ØªØ­Ø¯ÙŠØ¯"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M10.152 1.314A.924.924 0 009.23.4l-8.82 8.82a.924.924 0 000 1.307l4.41 4.41a.924.924 0 001.307 0l8.82-8.82a.924.924 0 000-1.307l-4.795-4.41zM3.451 9.727L9.23 3.948l4.41 4.053-5.779 5.779-4.41-4.053z"/></svg></button> <button data-tool="brush" class="drawing-tool active p-3 rounded-lg" title="ÙØ±Ø´Ø§Ø©"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"/><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd"/></svg></button> <button data-tool="line" class="drawing-tool p-3 rounded-lg" title="Ø®Ø·"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 3.293a1 1 0 010 1.414L3.414 17.707a1 1 0 01-1.414-1.414L15.293 2.293a1 1 0 011.414 0z"/></svg></button> <button data-tool="rect" class="drawing-tool p-3 rounded-lg" title="Ù…Ø³ØªØ·ÙŠÙ„"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V3zm1 1v10h10V4H4z" clip-rule="evenodd"/></svg></button> <button data-tool="circle" class="drawing-tool p-3 rounded-lg" title="Ø¯Ø§Ø¦Ø±Ø©"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM2 10a8 8 0 1116 0 8 8 0 01-16 0z" clip-rule="evenodd"/></svg></button> <button data-tool="text" class="drawing-tool p-3 rounded-lg" title="Ù†Øµ"><svg style="color: var(--primary-color);" class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 3h-1.5A3.25 3.25 0 006 6.25v1.5a.75.75 0 001.5 0v-1.5A1.75 1.75 0 019.25 4.5h1.5A1.75 1.75 0 0112.5 6.25v1.5a.75.75 0 001.5 0v-1.5A3.25 3.25 0 0010.75 3zM7.75 12a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z"/></svg></button> </div> <div class="flex-1 h-[60vh] md:h-auto rounded-md overflow-hidden"><canvas id="drawing-canvas-fabric"></canvas></div> <div class="flex flex-row md:flex-col flex-wrap justify-center items-center gap-4 p-2 rounded-lg" style="background-color: var(--input-bg);"> <div class="flex gap-2"><button id="undo-btn" class="p-3 tool-control" title="ØªØ±Ø§Ø¬Ø¹"><svg class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/></svg></button><button id="redo-btn" class="p-3 tool-control" title="ØªÙ‚Ø¯Ù…"><svg class="w-6 h-6 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.293 3.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 9H9a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h5.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></button></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„Ø­Ø¯</label><input type="color" id="stroke-color" value="#8A2BE2" class="w-10 h-10 p-0 m-0 border-none rounded cursor-pointer"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„ØªØ¹Ø¨Ø¦Ø©</label><input type="color" id="fill-color" value="#ffffff" class="w-10 h-10 p-0 m-0 border-none rounded cursor-pointer"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø­Ø¬Ù… Ø§Ù„Ø­Ø¯</label><input type="range" id="stroke-width" min="1" max="50" value="5" class="w-20"></div> <div class="tool-control flex flex-col items-center"><label class="text-xs">Ø§Ù„Ø´ÙØ§ÙÙŠØ©</label><input type="range" id="opacity" min="0" max="1" step="0.05" value="1" class="w-20"></div> <div class="tool-control flex flex-col items-center"><button id="delete-object" class="p-3" title="Ø­Ø°Ù"><svg class="w-6 h-6 text-red-500 pointer-events-none" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd"/></svg></button></div> </div> </div></div>`, logic:() => HovaniApp.initDrawingCanvas()},
    };
    
    // --- START APP ---
    document.addEventListener('DOMContentLoaded', () => HovaniApp.init());
    </script>
</body>
</html>
